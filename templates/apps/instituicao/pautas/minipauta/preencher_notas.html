{% extends "base/_dashboard_.html" %} {% load static %}
<!---->
{% block title%}
<!---->
Mini Pauta{% endblock %}

<!---->

{% block content %}

<div class="container mt-4">
	<!--Begin::Messages-->
	{% include "layout/message.html" %}
	<!--End::Messages-->

	<!---->
	<!---->
	<form method="POST">
		{% csrf_token %}
		<select name="turma">
			<option value="">-- Selecionar Turma --</option>
			{% for turma in turmas %}
			<option value="{{ turma.id }}">{{ turma.nome }}</option>
			{% endfor %}
		</select>

		<select name="disciplina">
			<option value="">-- Selecionar Disciplina --</option>
			{% for disciplina in disciplinas %}
			<option value="{{ disciplina.id }}">{{ disciplina.nome }}</option>
			{% endfor %}
		</select>

		<select name="trimestre">
			<option value="">-- Selecionar Trimestre --</option>
			<option value="1">1º Trimestre</option>
			<option value="2">2º Trimestre</option>
			<option value="3">3º Trimestre</option>
		</select>

		<button type="submit" name="filtrar">Filtrar</button>
	</form>

	<!---->
	<!---->

	<form method="post">
		{% csrf_token %}
		<table class="table table-bordered text-center align-middle">
			<thead class="table-light">
				<tr>
					<th>N</th>
					<th>Aluno</th>
					<th>AV1</th>
					<th>AV2</th>
					<th>AV3</th>
					<th>AV4</th>
					<th>MAC</th>
					<th>Exame</th>
					<th>MF</th>
					<th>Resultado</th>
				</tr>
			</thead>
			<tbody>
				{% for aluno in alunos %}
				<tr>
					<td>{{ forloop.counter }}</td>
					<td>{{ aluno.nome }}</td>

					{% for i in "1234" %}
					<td>
						<input
							type="number"
							step="0.1"
							min="0"
							max="20"
							name="av{{i}}_{{ aluno.id }}"
							class="nota-input form-control"
							data-id="{{ aluno.id }}"
						/>
					</td>
					{% endfor %}

					<!-- MAC (calculada) -->
					<td>
						<input
							type="text"
							name="mac_{{ aluno.id }}"
							id="mac_{{ aluno.id }}"
							class="mac-output form-control bg-light"
							readonly
						/>
					</td>

					<!-- Exame -->
					<td>
						<input
							type="number"
							step="0.1"
							min="0"
							max="20"
							name="exame_{{ aluno.id }}"
							id="exame_{{ aluno.id }}"
							class="exame-input form-control"
							data-id="{{ aluno.id }}"
						/>
					</td>

					<!-- Média Final (MF) -->
					<td>
						<input
							type="text"
							name="media_final_{{ aluno.id }}"
							id="media_final_{{ aluno.id }}"
							class="mf-output form-control bg-light"
							readonly
						/>
					</td>

					<!-- Resultado visual -->
					<td>
						<span id="icon_resultado_{{ aluno.id }}"></span>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>

		<div class="text-end">
			<button type="submit" class="btn btn-success">Salvar Notas</button>
		</div>
	</form>
</div>

{% endblock %}
