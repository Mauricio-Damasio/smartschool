{% load static %} {% load custom_filters %}

<!---->
<!---->
{% if not trimestre_liberado %}
<div class="alert alert-warning">
	<i class="bi bi-lock"></i> Este trimestre está bloqueado para a turma e
	disciplina selecionadas.
</div>
{% endif %} {% if trimestre_liberado %}

<!---->
<!---->

{% if alunos %}

<a
	href="{% url 'school:gerar_mini_pauta_pdf' %}?turma={{ request.GET.turma }}&disciplina={{ request.GET.disciplina }}&trimestre=
{{ request.GET.trimestre }}"
	class="btn btn-success mb-4 ml-2 text-decoration-none list-style"
	>Gerar Mini Pauta</a
>
<!---->

<table class="table mt-2 align-middle shadow-sm rounded-3 overflaw-hidden">
	<tbody>
		{% for aluno in alunos %} {% with pauta=pauta_dict|get_item:aluno.id %}
		<tr class="table-success">
			<td class="body-counter">{{forloop.counter}}</td>

			<!--Image-->
			<td class="mt-3">
				<ul
					class="list-unstyled m-0 avatar-group d-flex align-items-center ms-3"
				>
					<li class="avatar avatar-xs pull-up">
						{% if aluno.image %}
						<img
							src="{{ aluno.image.url }}"
							alt="Avatar"
							class="img-perfil rounded-circle"
						/>
						{% else %}
						<img
							src="{% static 'img/default-user.jpg' %}"
							alt="Avatar"
							class="img-perfil rounded-circle"
						/>
						{% endif %}
					</li>
				</ul>
				<p class="mt-2">{{ aluno.nome }}</p>
			</td>

			<td>
				<label for="" class="ms-1 mt-3">1ª Aval.</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="av1"
						data-id="{{ aluno.id }}"
						value="{{ pauta.av1|default:0 }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-1 mt-3">2ª Aval.</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="av2"
						data-id="{{ aluno.id }}"
						value="{{ pauta.av2|default:0 }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-1 mt-3">3ª Aval.</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="av3"
						data-id="{{ aluno.id }}"
						value="{{ pauta.av3|default:0 }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-1 mt-3">4ª Aval.</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="av4"
						data-id="{{ aluno.id }}"
						value="{{ pauta.av4|default:0 }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-3 mt-3">MAC</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="mac"
						readonly
						data-id="{{ aluno.id }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-3 mt-3">NPP</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="npp"
						data-id="{{ aluno.id }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-3 mt-3">NPT</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="npt"
						data-id="{{ aluno.id }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-3 mt-3">MT</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="mt"
						readonly
						data-id="{{ aluno.id }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-3 mt-3">Exame</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="exame"
						data-id="{{ aluno.id }}"
					/>
				</div>
			</td>
			<td>
				<label for="" class="ms-3 mt-3">MF</label>
				<div class="">
					<input
						type="number"
						step="0.1"
						min="0"
						max="20"
						class="nota"
						name="mf"
						readonly
						data-id="{{ aluno.id }}"
					/>
				</div>
			</td>
		</tr>

		{% endwith %} {% endfor %}
	</tbody>
</table>
{% else  %}
<div class="alert alert-warning">
	<i class="bi bi-person-add"></i> Nenhum aluno cadastrado nesta turma
</div>
{% endif %}

<!---->
{% endif %}
